chartRepoUrl: "https://nexus.firemetricshealth.com/repository/helm-firemetrics/"

argoCdNamespace: argocd

syncPolicy:
  automated:
    prune: true
    selfHeal: true

oidc:
  enabled: true
  # discoveryUrlOverride can be used to specify an external OIDC provider.
  discoveryUrlOverride: ""

database:
  dbname: firemetrics
  port: 5432
  superUserName: firemetrics
  hostnameOverride: ""
  existingSuperUserSecret: ""

backup:
  enabled: false
  bucketName: "backup"
  region: "auto"
  accessKey: "minio"
  secretKey: "minio123"
  endpoint: "http://minio"

# imagePullSecret is the name of the Kubernetes secret used to pull images from the ghcr.io registry.
imagePullSecret: ""

# spiloImage is the image used for the Postgres cluster and the bootstrap job.
spiloImage: ghcr.io/firemetrics/spilo17:4.0-p2-f0457965

components:
  postgres:
    enabled: true

    podServiceAccountNameOverride: ""
    numberOfInstances: 1
    clusterNameOverride: ""
    teamId: ""
    spiloRunAsUser: 101
    spiloRunAsGroup: 103
    spiloFSGroup: 103

    volume:
      size: 10Gi

    resources:
      requests:
        cpu: "10m"
        memory: "100Mi"
      limits:
        cpu: "32"
        memory: "128Gi"

    postgresql:
      version: "17"
      parameters:
        shared_buffers: 2GB
        max_locks_per_transaction: "512"
        work_mem: "256MB"

    extraEnv: []

    valuesOverride: {}

  bootstrap:
    enabled: true
    securityContext: {}
    firemetrics:
      workerCount: 1
    valuesOverride: {}

  fuego:
    enabled: true
    image: ghcr.io/firemetrics/fuego:aa1f58e2
    securityContext: {}
    valuesOverride: {}

  panel:
    enabled: true
    image: ghcr.io/firemetrics/fmx-panel:57f875c
    securityContext: {}
    publicPath: /panel
    datasetImportDisabled: false
    resourceExplorerDisabled: false
    nocodeBuilderDisabled: false
    sqlEditoryDisabled: false
    oidc:
      clientId: panel
      # audience is optional. If not set, it will default to the Panel's public URL.
      audience: ""
    valuesOverride: {}

  keycloak:
    enabled: true
    chartRepoUrl: "https://charts.bitnami.com/bitnami"
    chartVersion: 24.7.4
    publicPath: /auth
    importRealm:
      enabled: true
      realmName: firemetrics
    persistence:
      enabled: true
      size: 1Gi
    valuesOverride: {}

  minio:
    enabled: false
    chartRepoUrl: "https://operator.min.io"
    size: "10Gi"
    valuesOverride: {}

  ingress:
    enabled: true
    host: "example.com"
    fhirPath: /fhir
    certManager:
      enabled: false
      issuer: letsencrypt
    tls:
      enabled: false
      existingSecret: ""
    valuesOverride: {}
